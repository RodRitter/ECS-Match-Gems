{"version":3,"sources":["webpack:///webpack/bootstrap e0dde568f99df2859c71","webpack:///./src/core/system.js","webpack:///./src/core/component.js","webpack:///./src/core/entity.js","webpack:///./src/entry.js","webpack:///./src/core/game.js","webpack:///./src/systems/renderer.js","webpack:///./src/systems/gridSystem.js","webpack:///./src/systems/gameSystem.js","webpack:///./src/components/position.js","webpack:///./src/components/gridPosition.js","webpack:///./src/components/sprite.js","webpack:///./src/components/gravity.js","webpack:///./src/components/grid.js","webpack:///./src/components/gem.js","webpack:///./src/systems/positionSystem.js","webpack:///./src/systems/gravitySystem.js","webpack:///./src/systems/matchSystem.js"],"names":["System","constructor","game","id","name","onAwake","onStart","listen","callback","listenerObj","listener","listeners","undefined","Array","push","sendSignal","i","length","params","getComponents","components","componentArr","Object","keys","key","getComponentsWithDependency","dependencyName","allComponents","filteredComponents","component","dependency","entity","getComponent","filtered","getSystem","systems","system","Component","data","init","addComponent","getSiblingComponent","Entity","_generateRandomID","Date","toString","Math","random","addComponents","forEach","remove","window","entities","gameLoop","time","requestAnimationFrame","TWEEN","update","Game","running","start","_createSystems","addEntity","removeEntity","createEntity","Renderer","_init","sprites","_tick","bind","pixiRenderer","render","stage","renderNewSprites","PIXI","autoDetectRenderer","antialias","transparent","resolution","document","body","appendChild","view","setAttribute","Container","spriteComponents","spriteComponent","loaded","sprite","Sprite","fromImage","image","anchor","set","addChild","GridSystem","createListeners","renderGrid","map","createMap","renderer","grids","posComponent","pos","x","y","w","width","h","height","circle","Graphics","lineStyle","drawCircle","scale","endFill","grid","j","addExistingGemsToMap","gems","gem","console","warn","setPosition","from","to","getPositionFromGrid","getLowestEmptyGrid","check","GEMS","type","GameSystem","create","addTopRow","createRandomGem","fillEntireGrid","setTimeout","randomIndex","floor","Position","GridPosition","Gravity","Grid","Gem","PositionSystem","renderPositions","alignPositionsToGrid","gridSystem","newPos","GravitySystem","applyGravity","sort","compA","compB","calculateAndAnimateGravity","gemComp","lowGrid","currGrid","newGrid","animating","coords","target","randomDuration","posComp","animateGravity","positionComponent","duration","positionSystem","Tween","easing","Easing","Bounce","Out","onUpdate","MatchSystem"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e0dde568f99df2859c71","export class System {\n    constructor(game) {\n        this.id = this.constructor.name;\n        this.game = game;\n    }\n\n    onAwake() {\n        // Implemented in system\n    }\n\n    onStart() {\n        // Implemented in system\n    }\n\n    // --------------------------------------------\n    // Simplified signal/messaging between Systems\n    // --------------------------------------------\n    listen(id, callback) {\n        let listenerObj = {listener: this, callback: callback};\n        if(this.game.listeners[id] === undefined) {\n            this.game.listeners[id] = new Array();\n        }\n        this.game.listeners[id].push(listenerObj);\n    }\n\n    sendSignal(id) {\n        let listeners = this.game.listeners[id];\n        for (let i = 0; i < listeners.length; i++) {\n            listeners[i].callback();\n        }\n    }\n\n    sendSignal(id, params) {\n        let listeners = this.game.listeners[id];\n        for (let i = 0; i < listeners.length; i++) {\n            listeners[i].callback(params);\n        }\n    }\n    // --------------------------------------------\n\n    getComponents(id) {\n        let components = this.game.components[id];\n        let componentArr = [];\n\n        if(components !== undefined) {\n            for (let i = 0; i < Object.keys(components).length; i++) {\n                const key = Object.keys(components)[i];\n                componentArr.push(components[key]);\n            }\n        }\n        \n        return componentArr;\n    }\n\n    getComponentsWithDependency(id, dependencyName) {\n        let allComponents = this.getComponents(id);\n        let filteredComponents = [];\n        \n        for (let i = 0; i < allComponents.length; i++) {\n            const component = allComponents[i];\n            const dependency = component.entity.getComponent(dependencyName);\n            if(dependency !== undefined) {\n                let filtered = {};\n                filtered[id] = component;\n                filtered[dependencyName] = dependency;\n                filteredComponents.push(filtered);\n            };\n        }\n\n        return filteredComponents;\n    }\n\n    getSystem(id) {\n        for (let i = 0; i < this.game.systems.length; i++) {\n            const system = this.game.systems[i];\n            if(system.id == id) return system;\n        }\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/system.js","export class Component {\n    constructor(game, data) {\n        this.id = this.constructor.name;\n        this.game = game;\n        this.init(data);\n    }\n\n    // Called when Entity adds the component\n    addComponent() {\n        if(this.game.components[this.id] === undefined) {\n            this.game.components[this.id] = {};\n        }\n        this.game.components[this.id][this.entity.id] = this;\n    }\n\n    getSiblingComponent(id) {\n        let components = this.entity.components;\n        \n        for (let i = 0; i < Object.keys(components).length; i++) {\n            const component = components[Object.keys(components)[i]];\n            if(component.id == id) return component;\n        }\n    }\n\n    init(data) {\n        // implemented in component\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/component.js","export class Entity {\n    constructor() {\n        this.id = this._generateRandomID();\n        this.components = {};\n    }\n\n    _generateRandomID() {\n        return `Entity_${(+new Date()).toString(16) + (Math.random() * 100000000 | 0).toString(16)}`;\n    }\n\n    getComponent(id) {\n        return this.components[id]\n    }\n\n    addComponents(components) {\n        components.forEach(component => {\n            component.entity = this;\n            this.components[component.id] = component;\n            this.components[component.id].addComponent();\n        });\n    }\n\n    remove() {\n        // Delete components first\n        for(var key in this.components) {\n            delete window.game.components[key][this.id];\n        }\n\n        // then delete entity\n        delete window.game.entities[this.id];\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/entity.js","import { Game } from './core/game';\n\nwindow.game = new Game;\n\n// Start Game Loop\ngameLoop(0);\n\nfunction gameLoop(time) {\n    requestAnimationFrame(gameLoop);\n    TWEEN.update(time);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entry.js","// Core\nimport { Entity } from './entity';\nimport { System } from './system';\n\n// Systems\nimport { Renderer } from '../systems/renderer';\nimport { GridSystem } from '../systems/gridSystem';\nimport { GameSystem } from '../systems/gameSystem';\nimport { PositionSystem } from '../systems/positionSystem';\nimport { GravitySystem } from '../systems/gravitySystem';\nimport { MatchSystem } from '../systems/matchSystem';\n\n\nexport class Game {\n    constructor(){\n        this.running = false;\n        this.entities = {};\n        this.systems = [];\n        this.components = {};\n        this.listeners = {};\n        this.start();\n    }\n    _createSystems() {\n        this.systems = [\n            new GameSystem(this),\n            new Renderer(this),\n            new GridSystem(this),\n            new PositionSystem(this),\n            new GravitySystem(this),\n            new MatchSystem(this)\n        ];\n    }\n\n    start() {\n        // First create systems\n        this._createSystems();\n\n        // Awake systems in order\n        for (let i = 0; i < this.systems.length; i++) {\n            this.systems[i].onAwake();\n        }\n\n        // Game is now running!\n        this.running = true;\n\n        // Start systems in order\n        for (let i = 0; i < this.systems.length; i++) {\n            this.systems[i].onStart();\n        }\n    }\n\n    addEntity(entity) {\n        this.entities[entity.id] = entity;\n    }\n\n    removeEntity(entity) {\n        delete this.entities[entity.id];\n    }\n\n    createEntity(components) {\n        // Create Entity\n        let entity = new Entity(); \n        \n        // Add Components to Entity\n        entity.addComponents(components);\n\n        // Add Entity to Game\n        this.addEntity(entity);\n\n        return entity;\n    }\n\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/game.js","import { System } from '../core/system';\n\nexport class Renderer extends System {\n    onAwake() {\n        this._init();\n        this.sprites = [];\n    }\n\n    _tick(time) {\n        requestAnimationFrame(this._tick.bind(this));\n        this.pixiRenderer.render(this.stage);\n        this.renderNewSprites();\n        TWEEN.update(time);\n    }\n\n    _init() {\n        //Create the renderer\n        this.pixiRenderer = PIXI.autoDetectRenderer(800, 600, {antialias: false, transparent: false, resolution: 1});\n\t\tdocument.body.appendChild(this.pixiRenderer.view);\n        this.pixiRenderer.view.setAttribute(\"id\", \"stage\");\n        //Create the stage\n        this.stage = new PIXI.Container();\n        this.pixiRenderer.render(this.stage);\n\n        // Begin render loop\n        this._tick(0);\n    }\n\n    renderNewSprites() {\n        let spriteComponents = this.game.components['Sprite'];\n\n        if(spriteComponents !== undefined) {\n            for (let i = 0; i < Object.keys(spriteComponents).length; i++) {\n                const spriteComponent = this.game.components['Sprite'][Object.keys(spriteComponents)[i]];\n                if(spriteComponent.loaded == false) {\n                    let sprite = PIXI.Sprite.fromImage(spriteComponent.image);\n                    sprite.anchor.set(0.5,0.5);\n                    spriteComponent.sprite = sprite;\n                    this.stage.addChild(sprite);\n                    spriteComponent.loaded = true;\n                }\n            }\n        }\n\n        \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/renderer.js","import { System } from '../core/system';\n\nexport class GridSystem extends System {\n\n    onAwake() {\n        this.createListeners();\n    }\n\n    renderGrid() {\n        if(this.map === undefined) {this.map = this.createMap()};\n\n        let renderer = this.getSystem('Renderer');\n        let grids = this.getComponents('Grid');\n\n        for (let i = 0; i < grids.length; i++) {\n            let posComponent = grids[i].getSiblingComponent('Position');\n            let pos = {x: 0, y: 0}\n\n            if(posComponent !== undefined) {\n                pos.x = posComponent.x;\n                pos.y = posComponent.y;\n            }\n\n            for (let w = 0; w < grids[i].width; w++) {\n                for (let h = 0; h < grids[i].height; h++) {\n                    let circle = new PIXI.Graphics();\n                    circle.lineStyle(2, 0xFF00FF);\n                    circle.drawCircle(pos.x + (w * grids[i].scale), pos.y + (h * grids[i].scale),2);\n                    circle.endFill();\n                    renderer.stage.addChild(circle);\n                }    \n            }\n        }\n    }\n\n    createMap() {\n        let grid = this.getComponents('Grid')[0];\n        let width = grid.width;\n        let height = grid.height;\n\n        let map = new Array();\n        for (let i = 0; i < width; i++) {\n            map[i] = new Array();\n            for (let j = 0; j < height; j++) {\n                map[i][j] = undefined;\n            }  \n        }\n        return map;\n    }\n\n    addExistingGemsToMap() {\n        let gems = this.getComponents('Gem');\n        for (let i = 0; i < gems.length; i++) {\n            let gem = gems[i];\n            if(this.map[gem.x][gem.y] === undefined) {\n                this.map[gem.x][gem.y] = gem;\n            } else {\n                console.warn(`Error: Trying to add Gem to occupied space on grid map.`);\n            }\n            \n        }\n    }\n\n    setPosition(from, to) {\n        this.map[to.x][to.y] = this.map[from.x][from.y];\n        this.map[from.x][from.y] = undefined;\n    }\n\n    // Get a global position form grid co-ordinates\n    getPositionFromGrid(x,y) {\n        let grid = this.getComponents('Grid')[0];\n        if(grid !== undefined) {\n            let posComponent = grid.getSiblingComponent('Position');\n            return {\n                x: posComponent.x + (x * grid.scale),\n                y: posComponent.y + (y * grid.scale)\n            }\n        }\n    }\n    \n\n    getLowestEmptyGrid(x,y) {\n        let grid = this.getComponents('Grid')[0];\n        let check = y+1;\n        while(this.map[x][check] === undefined && check < grid.height) {\n            check++;\n        }\n        return check-1;\n    }\n\n    createListeners() {\n        this.listen('Grid.CreateGrid', () => {\n            this.renderGrid();\n        });\n\n        this.listen('Grid.AddGemsToMap', () => {\n            this.addExistingGemsToMap();\n        });\n    }\n    \n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/gridSystem.js","// Core\nimport { Entity } from '../core/entity';\nimport { Component } from '../core/component';\nimport { System } from '../core/system';\n\n// Components\nimport { Position } from '../components/position';\nimport { GridPosition } from '../components/gridPosition';\nimport { Sprite } from '../components/sprite';\nimport { Gravity } from '../components/gravity';\nimport { Grid } from '../components/grid';\nimport { Gem } from '../components/gem';\n\nconst GEMS = [\n    {\n        image: 'resources/gems/element_blue_square_glossy.png',\n        type: 'blue'\n    }, {\n        image: 'resources/gems/element_green_square_glossy.png',\n        type: 'green'\n    }, {\n        image: 'resources/gems/element_grey_square_glossy.png',\n        type: 'silver'\n    }, {\n        image: 'resources/gems/element_purple_cube_glossy.png',\n        type: 'purple'\n    }, {\n        image: 'resources/gems/element_yellow_square_glossy.png',\n        type: 'yellow'\n    }\n];\n\nexport class GameSystem extends System {\n\n    onStart() {\n        this.create();\n    }\n\n    create() {\n\n        this.game.createEntity([\n            new Position(this.game, {x: 50, y: 50}),\n            new Grid(this.game, {width: 10, height: 13, scale: 40})\n        ]);\n\n    }\n\n    start() {\n        this.sendSignal('Grid.CreateGrid');\n        this.sendSignal('Grid.AddGemsToMap');\n        this.sendSignal('Position.AlignAndPositionToGrid');\n        this.sendSignal('Gravity.ApplyGravity');\n    }\n\n    addTopRow() {\n        let grid = this.getComponents('Grid')[0];\n        let map = this.getSystem('GridSystem').map;\n\n        for (let i = 0; i < grid.width; i++) {\n            const grid = map[i][0];\n            if(grid === undefined) {\n                this.createRandomGem(i,0);\n            }\n        }\n\n        this.sendSignal('Grid.AddGemsToMap');\n        this.sendSignal('Position.AlignAndPositionToGrid');\n        this.sendSignal('Gravity.ApplyGravity');\n    }\n\n    fillEntireGrid() {\n        let grid = this.getComponents('Grid')[0];\n        let map = this.getSystem('GridSystem').map;\n\n        for (let w = 0; w < grid.width; w++) {\n            for (let h = 0; h < grid.height; h++) {\n                const grid = map[w][h];\n                if(grid === undefined) {\n                    this.createRandomGem(w,h);\n                }\n            }\n        }\n\n        window.setTimeout(() => {\n            this.sendSignal('Grid.AddGemsToMap');\n            this.sendSignal('Position.AlignAndPositionToGrid');\n        }, 10);\n        \n    }\n\n    createRandomGem(x, y) {\n        let grid = this.getComponents('Grid')[0];\n        let randomIndex = Math.floor(Math.random() * GEMS.length-1) + 1;\n        \n        this.game.createEntity([\n            new Position(this.game, {x: 0, y: 0}),\n            new Sprite(this.game, {image: GEMS[randomIndex].image}),\n            new Gem(this.game, {x: x, y: y}),\n            new Gravity(this.game, {})\n        ]);\n    }\n\n    \n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/gameSystem.js","import { Component } from '../core/component';\n\nexport class Position extends Component {\n    init(data) {\n        this.x = data.x;\n        this.y = data.y;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/position.js","import { Component } from '../core/component';\n\nexport class GridPosition extends Component {\n    init(data) {\n        this.x = data.x;\n        this.y = data.y;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/gridPosition.js","import { Component } from '../core/component';\n\nexport class Sprite extends Component {\n    init(data) {\n        this.image = data.image;\n        this.sprite = undefined;\n        this.loaded = false;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/sprite.js","import { Component } from '../core/component';\n\nexport class Gravity extends Component {\n    init(data) {\n        \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/gravity.js","import { Component } from '../core/component';\n\nexport class Grid extends Component {\n    init(data) {\n        this.width = data.width;\n        this.height = data.height;\n        this.scale = data.scale;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/grid.js","import { Component } from '../core/component';\n\nexport class Gem extends Component {\n    init(data) {\n        this.x = data.x;\n        this.y = data.y;\n        this.grid = data.grid;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/gem.js","import { System } from '../core/system';\n\nexport class PositionSystem extends System {\n\n    onAwake() {\n        this.createListeners();\n    }\n\n    renderPositions() {\n        let components = this.getComponentsWithDependency('Position', 'Sprite');\n        \n        for (let i = 0; i < components.length; i++) {\n            const posComponent = components[i].Position;\n\n            const spriteComponent = components[i].Sprite;\n            let sprite = spriteComponent.sprite;\n\n            if(sprite !== undefined) {\n                sprite.x = posComponent.x;\n                sprite.y = posComponent.y;\n            }\n        }\n    }\n\n    alignPositionsToGrid() {\n        let gridSystem = this.getSystem('GridSystem');\n        let components = this.getComponentsWithDependency('Position', 'Gem');\n\n        for (let i = 0; i < components.length; i++) {\n            let newPos = gridSystem.getPositionFromGrid(components[i].Gem.x, components[i].Gem.y);\n            components[i].Position.x = newPos.x;\n            components[i].Position.y = newPos.y;\n        }\n    }\n\n    createListeners() {\n        this.listen('Position.RenderPositions', () => {\n            this.renderPositions();\n        });\n\n        this.listen('Position.AlignToGrid', () => {\n            this.alignPositionsToGrid();\n        });\n\n        this.listen('Position.AlignAndPositionToGrid', () => {\n            this.alignPositionsToGrid();\n            this.renderPositions();\n        });\n    }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/positionSystem.js","import { System } from '../core/system';\n\nexport class GravitySystem extends System {\n\n    onAwake() {\n        this.createListeners();\n    }\n\n    applyGravity() {\n        let components = this.getComponentsWithDependency('Gravity', 'Gem');\n\n        // Start from lowest Y and work way up\n        components.sort(function(compA, compB) {\n            return compB.Gem.y - compA.Gem.y;\n        });\n        \n        for (let i = 0; i < components.length; i++) {\n            this.calculateAndAnimateGravity(components[i]);\n        }\n    }\n\n    calculateAndAnimateGravity(component) {\n        let gridSystem = this.getSystem('GridSystem');\n        let gemComp = component.Gem;\n\n        // Get lowest grid\n        let lowGrid = gridSystem.getLowestEmptyGrid(gemComp.x, gemComp.y);\n        \n        // set to lowest grid\n        let currGrid = {x: gemComp.x, y: gemComp.y};\n        let newGrid = {x: gemComp.x, y: lowGrid};\n\n\n        if(gridSystem.map[newGrid.x][lowGrid] === undefined) {\n            gemComp.y = newGrid.y;\n            gridSystem.setPosition(currGrid, newGrid);\n        \n            // Animate gravity\n            if(newGrid !== currGrid) {\n                this.animating = true;\n                let coords = gridSystem.getPositionFromGrid(currGrid.x, currGrid.y);\n                let target = gridSystem.getPositionFromGrid(newGrid.x, newGrid.y);\n                let randomDuration = Math.floor(Math.random() * (950 - 750)) + 750;\n                let posComp = gemComp.getSiblingComponent('Position');\n                this.animateGravity(posComp, coords, target, randomDuration);\n            }\n        }\n    }\n\n    animateGravity(positionComponent, coords, target, duration) {\n        let positionSystem = this.getSystem('PositionSystem');\n        new TWEEN.Tween(coords)\n        .to(target, duration)\n        .easing(TWEEN.Easing.Bounce.Out)\n        .onUpdate(function() {\n            positionComponent.x = coords.x;\n            positionComponent.y = coords.y;\n            positionSystem.renderPositions();\n        })\n        .start();\n    }\n\n\n    createListeners() {\n        this.listen('Gravity.ApplyGravity', () => {\n            this.applyGravity();\n        });\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/gravitySystem.js","import { System } from '../core/system';\n\nexport class MatchSystem extends System {\n\n    onStart() {\n        \n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/systems/matchSystem.js"],"sourceRoot":""}